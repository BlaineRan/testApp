"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[283],{5966:function(ue,W,a){var G=a(87462),N=a(44925),H=a(67294),T=a(78646),X=["fieldProps","proFieldProps"],b=["fieldProps","proFieldProps"],D="text",C=function(t){var I=t.fieldProps,A=t.proFieldProps,L=(0,N.Z)(t,X);return H.createElement(T.Z,(0,G.Z)({mode:"edit",valueType:D,fieldProps:I,filedConfig:{valueType:D},proFieldProps:A},L))},k=function(t){var I=t.fieldProps,A=t.proFieldProps,L=(0,N.Z)(t,b);return H.createElement(T.Z,(0,G.Z)({mode:"edit",valueType:"password",fieldProps:I,proFieldProps:A,filedConfig:{valueType:D}},L))},E=C;E.Password=k,E.displayName="ProFormComponent",W.Z=E},74200:function(ue,W,a){a.r(W),a.d(W,{default:function(){return Ne}});var G=a(43088),N=a.n(G),H=a(31734),T=a.n(H),X=a(45176),b=a.n(X),D=a(32914),C=a.n(D),k=a(36205),E=a(94601),g=a(1413),t=a(67294),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},A=I,L=a(27029),re=function(s,o){return t.createElement(L.Z,(0,g.Z)((0,g.Z)({},s),{},{ref:o,icon:A}))};re.displayName="LockOutlined";var de=t.forwardRef(re),ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},ve=ce,se=function(s,o){return t.createElement(L.Z,(0,g.Z)((0,g.Z)({},s),{},{ref:o,icon:ve}))};se.displayName="MobileOutlined";var me=t.forwardRef(se),ge=a(89366),w=a(87462),De=a(207),fe=a(75901),ne=a(44925),he=a(54787),pe=a(47232),xe=["logo","message","contentStyle","title","subTitle","actions","children"];function Fe(r){var s=r.logo,o=r.message,h=r.contentStyle,F=r.title,Z=r.subTitle,P=r.actions,p=r.children,l=(0,ne.Z)(r,xe),j=(0,he.YB)(),O=l.submitter===!1?!1:(0,g.Z)((0,g.Z)({searchConfig:{submitText:j.getMessage("loginForm.submitText","\u767B\u5F55")},submitButtonProps:{size:"large",style:{width:"100%"}}},l.submitter),{},{render:function(u,J){var V,R,K=J.pop();if((l==null||(V=l.submitter)===null||V===void 0?void 0:V.render)===void 0)return K;if(typeof(l==null||(R=l.submitter)===null||R===void 0?void 0:R.render)=="function"){var y,d;return l==null||(y=l.submitter)===null||y===void 0||(d=y.render)===null||d===void 0?void 0:d.call(y,u,J)}return K}}),ae=(0,t.useContext)(fe.ZP.ConfigContext),te=ae.getPrefixCls("pro-form-login"),v=function(u){return"".concat(te,"-").concat(u)},z=(0,t.useMemo)(function(){return s?typeof s=="string"?t.createElement("img",{src:s}):s:null},[s]);return t.createElement("div",{className:v("container")},t.createElement("div",{className:v("top")},F||z?t.createElement("div",{className:v("header")},z?t.createElement("span",{className:v("logo")},z):null,F?t.createElement("span",{className:v("title")},F):null):null,Z?t.createElement("div",{className:v("desc")},Z):null),t.createElement("div",{className:v("main"),style:(0,g.Z)({width:328},h)},t.createElement(pe.A,(0,w.Z)({isKeyPressSubmit:!0},l,{submitter:O}),o,p),P?t.createElement("div",{className:v("other")},P):null))}var Ie=a(87299),Pe=a(9676),Me=a(22270),Ce=a(64893),Ze=a(78646),je=["options","fieldProps","proFieldProps","valueEnum"],Ee=t.forwardRef(function(r,s){var o=r.options,h=r.fieldProps,F=r.proFieldProps,Z=r.valueEnum,P=(0,ne.Z)(r,je);return t.createElement(Ze.Z,(0,w.Z)({ref:s,valueType:"checkbox",mode:"edit",valueEnum:(0,Me.h)(Z,void 0),fieldProps:(0,g.Z)({options:o},h),proFieldProps:F},P))}),ye=t.forwardRef(function(r,s){var o=r.fieldProps,h=r.children;return t.createElement(Pe.Z,(0,w.Z)({ref:s},o),h)}),Te=(0,Ce.G)(ye,{valuePropName:"checked"}),oe=Te;oe.Group=Ee;var be=oe,q=a(5966),f=a(59841),S=a(86835),Le=a(50146),_=a(4107),$=a(47933),Se=a(76772),Y=a(48086),ee=a(51752),B={container:"container___Gu7OB",lang:"lang___T6zNf",content:"content____mgVA",icon:"icon___VFrN1"},e=a(85893),Be=function(s){var o=s.visible,h=s.onCreate,F=s.onCancel,Z=S.Z.useForm(),P=b()(Z,1),p=P[0];return(0,e.jsx)(Le.Z,{visible:o,title:"\u6CE8\u518C\u7528\u6237",okText:"\u6CE8\u518C",cancelText:"\u53D6\u6D88",onCancel:F,onOk:function(){p.validateFields().then(function(j){p.resetFields(),h(j)}).catch(function(j){console.log("\u6CE8\u518C\u4FE1\u606F\u6536\u96C6\u5931\u8D25",j)})},children:(0,e.jsxs)(S.Z,{form:p,layout:"vertical",name:"form_in_modal",initialValues:{userType:"user"},children:[(0,e.jsx)(S.Z.Item,{name:"userName",label:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}],children:(0,e.jsx)(_.Z,{})}),(0,e.jsx)(S.Z.Item,{name:"account",label:"\u8D26\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7"}],children:(0,e.jsx)(_.Z,{})}),(0,e.jsx)(S.Z.Item,{name:"password",label:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}],children:(0,e.jsx)(_.Z,{})}),(0,e.jsx)(S.Z.Item,{name:"userType",className:"collection-create-form_last-form-item",children:(0,e.jsxs)($.ZP.Group,{children:[(0,e.jsx)($.ZP,{value:"user",children:"\u666E\u901A\u7528\u6237"}),(0,e.jsx)($.ZP,{value:"admin",children:"\u7BA1\u7406\u5458"}),(0,e.jsx)($.ZP,{value:"inspector",children:"\u5DE1\u67E5\u5458"})]})})]})})},le=function(s){var o=s.content;return(0,e.jsx)(Se.Z,{style:{marginBottom:24},message:o,type:"error",showIcon:!0})},Oe=function(){var s=(0,t.useState)({}),o=b()(s,2),h=o[0],F=o[1],Z=(0,t.useState)("account"),P=b()(Z,2),p=P[0],l=P[1],j=(0,f.useModel)("@@initialState"),O=j.initialState,ae=j.setInitialState,te=(0,t.useState)(!1),v=b()(te,2),z=v[0],U=v[1],u=(0,f.useIntl)(),J=function(m){console.log("\u6CE8\u518C\u8868\u5355\u63A5\u6536\u4FE1\u606F",m);var i=(0,E.z2)(m);i.then(function(M){M==="success"?Y.ZP.success("\u6CE8\u518C\u6210\u529F\uFF01"):Y.ZP.error("\u6CE8\u518C\u5931\u8D25\uFF01\u7528\u6237\u540D\u6216\u8D26\u53F7\u91CD\u590D")}),console.log("\u6CE8\u518C\u72B6\u6001: "+i),U(!1)},V=function(){var d=T()(C().mark(function m(){var i,M;return C().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,O==null||(i=O.fetchUserInfo)===null||i===void 0?void 0:i.call(O);case 2:if(M=x.sent,!M){x.next=6;break}return x.next=6,ae(function(Q){return N()(N()({},Q),{},{currentUser:M})});case 6:case"end":return x.stop()}},m)}));return function(){return d.apply(this,arguments)}}(),R=function(){var d=T()(C().mark(function m(i,M){var c,x,Q,ie;return C().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,console.log(i),c=null,M!=="invite"){n.next=10;break}if(i.invite!=="Yali_1906"){n.next=8;break}return n.next=7,(0,E.x4)({account:"111111111",password:"111111111",type:"account"});case 7:c=n.sent;case 8:n.next=13;break;case 10:return n.next=12,(0,E.x4)(i);case 12:c=n.sent;case 13:if(c.status!=="ok"){n.next=21;break}return x=u.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),Y.ZP.success(x),n.next=18,V();case 18:return Q=new URL(window.location.href).searchParams,f.history.push(Q.get("redirect")||"/"),n.abrupt("return");case 21:console.log(c),F(c),n.next=30;break;case 25:n.prev=25,n.t0=n.catch(0),ie=u.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),console.log(n.t0),Y.ZP.error(ie);case 30:case"end":return n.stop()}},m,null,[[0,25]])}));return function(i,M){return d.apply(this,arguments)}}(),K=h.status,y=h.type;return(0,e.jsxs)("div",{className:B.container,children:[(0,e.jsx)("div",{className:B.lang,"data-lang":!0,children:f.SelectLang&&(0,e.jsx)(f.SelectLang,{})}),(0,e.jsxs)("div",{className:B.content,children:[(0,e.jsxs)(Fe,{logo:(0,e.jsx)("img",{alt:"logo",src:"/bridge.svg"}),title:"\u6865\u6881\u4FE1\u606F\u7BA1\u7406\u7CFB\u7EDF",subTitle:"\u4E00\u8FB9\u590D\u4E60\u8BA1\u7B97\u673A\u7CFB\u7EDF\u4E00\u8FB9\u5199\u51FA\u6765\u7684\u597D\u9879\u76EE\uFF01",initialValues:{autoLogin:!0},onFinish:function(){var d=T()(C().mark(function m(i){return C().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,R(i,p);case 2:case"end":return c.stop()}},m)}));return function(m){return d.apply(this,arguments)}}(),children:[(0,e.jsxs)(ee.Z,{activeKey:p,onChange:l,children:[(0,e.jsx)(ee.Z.TabPane,{tab:u.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),(0,e.jsx)(ee.Z.TabPane,{tab:u.formatMessage({id:"pages.login.inviteLogin.tab",defaultMessage:"\u9080\u8BF7\u7801\u767B\u5F55"})},"invite")]}),K==="error"&&y==="account"&&(0,e.jsx)(le,{content:u.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF"})}),p==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(q.Z,{name:"account",fieldProps:{size:"large",prefix:(0,e.jsx)(ge.Z,{className:B.prefixIcon})},placeholder:u.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D"}),rules:[{required:!0,message:(0,e.jsx)(f.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,e.jsx)(q.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(de,{className:B.prefixIcon})},placeholder:u.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:(0,e.jsx)(f.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),K==="error"&&y==="invite"&&(0,e.jsx)(le,{content:"\u9080\u8BF7\u7801\u9519\u8BEF"}),p==="invite"&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(q.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(me,{className:B.prefixIcon})},name:"invite",placeholder:u.formatMessage({id:"pages.login.inviteKey.placeholder",defaultMessage:"\u9080\u8BF7\u7801"}),rules:[{required:!0,message:(0,e.jsx)(f.FormattedMessage,{id:"pages.login.inviteKey.required",defaultMessage:"\u9080\u8BF7\u7801\u662F\u5FC5\u586B\u9879"})}]})}),(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)(be,{noStyle:!0,name:"autoLogin",children:(0,e.jsx)(f.FormattedMessage,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,e.jsx)("a",{style:{float:"right"},onClick:function(){U(!0)},children:(0,e.jsx)(f.FormattedMessage,{id:"pages.login.registerAccount",defaultMessage:"\u6CE8\u518C\u8D26\u6237"})})]})]}),(0,e.jsx)(Be,{visible:z,onCreate:J,onCancel:function(){U(!1)}})]}),(0,e.jsx)(k.Z,{})]})},Ne=Oe}}]);
