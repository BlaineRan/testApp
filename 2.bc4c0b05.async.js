"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[283],{5966:function(ue,W,a){var G=a(87462),O=a(44925),H=a(67294),y=a(78646),X=["fieldProps","proFieldProps"],T=["fieldProps","proFieldProps"],N="text",C=function(t){var I=t.fieldProps,A=t.proFieldProps,L=(0,O.Z)(t,X);return H.createElement(y.Z,(0,G.Z)({mode:"edit",valueType:N,fieldProps:I,filedConfig:{valueType:N},proFieldProps:A},L))},k=function(t){var I=t.fieldProps,A=t.proFieldProps,L=(0,O.Z)(t,T);return H.createElement(y.Z,(0,G.Z)({mode:"edit",valueType:"password",fieldProps:I,proFieldProps:A,filedConfig:{valueType:N}},L))},D=C;D.Password=k,D.displayName="ProFormComponent",W.Z=D},74200:function(ue,W,a){a.r(W),a.d(W,{default:function(){return Ne}});var G=a(43088),O=a.n(G),H=a(31734),y=a.n(H),X=a(45176),T=a.n(X),N=a(32914),C=a.n(N),k=a(36205),D=a(94601),g=a(1413),t=a(67294),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},A=I,L=a(27029),se=function(r,n){return t.createElement(L.Z,(0,g.Z)((0,g.Z)({},r),{},{ref:n,icon:A}))};se.displayName="LockOutlined";var de=t.forwardRef(se),ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},ve=ce,re=function(r,n){return t.createElement(L.Z,(0,g.Z)((0,g.Z)({},r),{},{ref:n,icon:ve}))};re.displayName="MobileOutlined";var me=t.forwardRef(re),ge=a(89366),w=a(87462),De=a(207),fe=a(75901),ne=a(44925),he=a(54787),pe=a(47232),xe=["logo","message","contentStyle","title","subTitle","actions","children"];function Fe(s){var r=s.logo,n=s.message,h=s.contentStyle,F=s.title,Z=s.subTitle,P=s.actions,p=s.children,o=(0,ne.Z)(s,xe),j=(0,he.YB)(),B=o.submitter===!1?!1:(0,g.Z)((0,g.Z)({searchConfig:{submitText:j.getMessage("loginForm.submitText","\u767B\u5F55")},submitButtonProps:{size:"large",style:{width:"100%"}}},o.submitter),{},{render:function(l,J){var V,R,K=J.pop();if((o==null||(V=o.submitter)===null||V===void 0?void 0:V.render)===void 0)return K;if(typeof(o==null||(R=o.submitter)===null||R===void 0?void 0:R.render)=="function"){var E,i;return o==null||(E=o.submitter)===null||E===void 0||(i=E.render)===null||i===void 0?void 0:i.call(E,l,J)}return K}}),ae=(0,t.useContext)(fe.ZP.ConfigContext),te=ae.getPrefixCls("pro-form-login"),v=function(l){return"".concat(te,"-").concat(l)},z=(0,t.useMemo)(function(){return r?typeof r=="string"?t.createElement("img",{src:r}):r:null},[r]);return t.createElement("div",{className:v("container")},t.createElement("div",{className:v("top")},F||z?t.createElement("div",{className:v("header")},z?t.createElement("span",{className:v("logo")},z):null,F?t.createElement("span",{className:v("title")},F):null):null,Z?t.createElement("div",{className:v("desc")},Z):null),t.createElement("div",{className:v("main"),style:(0,g.Z)({width:328},h)},t.createElement(pe.A,(0,w.Z)({isKeyPressSubmit:!0},o,{submitter:B}),n,p),P?t.createElement("div",{className:v("other")},P):null))}var Ie=a(87299),Pe=a(9676),Me=a(22270),Ce=a(64893),Ze=a(78646),je=["options","fieldProps","proFieldProps","valueEnum"],Ee=t.forwardRef(function(s,r){var n=s.options,h=s.fieldProps,F=s.proFieldProps,Z=s.valueEnum,P=(0,ne.Z)(s,je);return t.createElement(Ze.Z,(0,w.Z)({ref:r,valueType:"checkbox",mode:"edit",valueEnum:(0,Me.h)(Z,void 0),fieldProps:(0,g.Z)({options:n},h),proFieldProps:F},P))}),ye=t.forwardRef(function(s,r){var n=s.fieldProps,h=s.children;return t.createElement(Pe.Z,(0,w.Z)({ref:r},n),h)}),Te=(0,Ce.G)(ye,{valuePropName:"checked"}),oe=Te;oe.Group=Ee;var Le=oe,q=a(5966),f=a(59841),S=a(86835),Se=a(50146),_=a(4107),$=a(47933),be=a(76772),Y=a(48086),ee=a(51752),b={container:"container___Gu7OB",lang:"lang___T6zNf",content:"content____mgVA",icon:"icon___VFrN1"},e=a(85893),Be=function(r){var n=r.visible,h=r.onCreate,F=r.onCancel,Z=S.Z.useForm(),P=T()(Z,1),p=P[0];return(0,e.jsx)(Se.Z,{visible:n,title:"\u6CE8\u518C\u7528\u6237",okText:"\u6CE8\u518C",cancelText:"\u53D6\u6D88",onCancel:F,onOk:function(){p.validateFields().then(function(j){p.resetFields(),h(j)}).catch(function(j){console.log("\u6CE8\u518C\u4FE1\u606F\u6536\u96C6\u5931\u8D25",j)})},children:(0,e.jsxs)(S.Z,{form:p,layout:"vertical",name:"form_in_modal",initialValues:{userType:"user"},children:[(0,e.jsx)(S.Z.Item,{name:"userName",label:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}],children:(0,e.jsx)(_.Z,{})}),(0,e.jsx)(S.Z.Item,{name:"account",label:"\u8D26\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7"}],children:(0,e.jsx)(_.Z,{})}),(0,e.jsx)(S.Z.Item,{name:"password",label:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}],children:(0,e.jsx)(_.Z,{})}),(0,e.jsx)(S.Z.Item,{name:"userType",className:"collection-create-form_last-form-item",children:(0,e.jsxs)($.ZP.Group,{children:[(0,e.jsx)($.ZP,{value:"user",children:"\u666E\u901A\u7528\u6237"}),(0,e.jsx)($.ZP,{value:"admin",children:"\u7BA1\u7406\u5458"}),(0,e.jsx)($.ZP,{value:"inspector",children:"\u5DE1\u67E5\u5458"})]})})]})})},le=function(r){var n=r.content;return(0,e.jsx)(be.Z,{style:{marginBottom:24},message:n,type:"error",showIcon:!0})},Oe=function(){var r=(0,t.useState)({}),n=T()(r,2),h=n[0],F=n[1],Z=(0,t.useState)("account"),P=T()(Z,2),p=P[0],o=P[1],j=(0,f.useModel)("@@initialState"),B=j.initialState,ae=j.setInitialState,te=(0,t.useState)(!1),v=T()(te,2),z=v[0],U=v[1],l=(0,f.useIntl)(),J=function(m){console.log("\u6CE8\u518C\u8868\u5355\u63A5\u6536\u4FE1\u606F",m);var u=(0,D.z2)(m);u.then(function(M){M==="success"?Y.ZP.success("\u6CE8\u518C\u6210\u529F\uFF01"):Y.ZP.error("\u6CE8\u518C\u5931\u8D25\uFF01\u7528\u6237\u540D\u6216\u8D26\u53F7\u91CD\u590D")}),console.log("\u6CE8\u518C\u72B6\u6001: "+u),U(!1)},V=function(){var i=y()(C().mark(function m(){var u,M;return C().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,B==null||(u=B.fetchUserInfo)===null||u===void 0?void 0:u.call(B);case 2:if(M=x.sent,!M){x.next=6;break}return x.next=6,ae(function(Q){return O()(O()({},Q),{},{currentUser:M})});case 6:case"end":return x.stop()}},m)}));return function(){return i.apply(this,arguments)}}(),R=function(){var i=y()(C().mark(function m(u,M){var d,x,Q,ie;return C().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,console.log(u),d=null,M==="invite"?u.invite==="Yali_1906"&&(d={status:"success",type:"account",access:"admin"}):d={status:"success",type:"account",access:"admin"},d.status!=="ok"){c.next=12;break}return x=l.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),Y.ZP.success(x),c.next=9,V();case 9:return Q=new URL(window.location.href).searchParams,f.history.push(Q.get("redirect")||"/"),c.abrupt("return");case 12:console.log(d),F(d),c.next=21;break;case 16:c.prev=16,c.t0=c.catch(0),ie=l.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),console.log(c.t0),Y.ZP.error(ie);case 21:case"end":return c.stop()}},m,null,[[0,16]])}));return function(u,M){return i.apply(this,arguments)}}(),K=h.status,E=h.type;return(0,e.jsxs)("div",{className:b.container,children:[(0,e.jsx)("div",{className:b.lang,"data-lang":!0,children:f.SelectLang&&(0,e.jsx)(f.SelectLang,{})}),(0,e.jsxs)("div",{className:b.content,children:[(0,e.jsxs)(Fe,{logo:(0,e.jsx)("img",{alt:"logo",src:"/bridge.svg"}),title:"\u6865\u6881\u4FE1\u606F\u7BA1\u7406\u7CFB\u7EDF",subTitle:"\u4E00\u8FB9\u590D\u4E60\u8BA1\u7B97\u673A\u7CFB\u7EDF\u4E00\u8FB9\u5199\u51FA\u6765\u7684\u597D\u9879\u76EE\uFF01",initialValues:{autoLogin:!0},onFinish:function(){var i=y()(C().mark(function m(u){return C().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,R(u,p);case 2:case"end":return d.stop()}},m)}));return function(m){return i.apply(this,arguments)}}(),children:[(0,e.jsxs)(ee.Z,{activeKey:p,onChange:o,children:[(0,e.jsx)(ee.Z.TabPane,{tab:l.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),(0,e.jsx)(ee.Z.TabPane,{tab:l.formatMessage({id:"pages.login.inviteLogin.tab",defaultMessage:"\u9080\u8BF7\u7801\u767B\u5F55"})},"invite")]}),K==="error"&&E==="account"&&(0,e.jsx)(le,{content:l.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF"})}),p==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(q.Z,{name:"account",fieldProps:{size:"large",prefix:(0,e.jsx)(ge.Z,{className:b.prefixIcon})},placeholder:l.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D"}),rules:[{required:!0,message:(0,e.jsx)(f.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,e.jsx)(q.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(de,{className:b.prefixIcon})},placeholder:l.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:(0,e.jsx)(f.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),K==="error"&&E==="invite"&&(0,e.jsx)(le,{content:"\u9080\u8BF7\u7801\u9519\u8BEF"}),p==="invite"&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(q.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(me,{className:b.prefixIcon})},name:"invite",placeholder:l.formatMessage({id:"pages.login.inviteKey.placeholder",defaultMessage:"\u9080\u8BF7\u7801"}),rules:[{required:!0,message:(0,e.jsx)(f.FormattedMessage,{id:"pages.login.inviteKey.required",defaultMessage:"\u9080\u8BF7\u7801\u662F\u5FC5\u586B\u9879"})}]})}),(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)(Le,{noStyle:!0,name:"autoLogin",children:(0,e.jsx)(f.FormattedMessage,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,e.jsx)("a",{style:{float:"right"},onClick:function(){U(!0)},children:(0,e.jsx)(f.FormattedMessage,{id:"pages.login.registerAccount",defaultMessage:"\u6CE8\u518C\u8D26\u6237"})})]})]}),(0,e.jsx)(Be,{visible:z,onCreate:J,onCancel:function(){U(!1)}})]}),(0,e.jsx)(k.Z,{})]})},Ne=Oe}}]);
