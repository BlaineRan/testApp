"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[980],{5966:function(N,T,t){var R=t(87462),I=t(44925),F=t(67294),l=t(78646),S=["fieldProps","proFieldProps"],c=["fieldProps","proFieldProps"],y="text",k=function(_){var E=_.fieldProps,m=_.proFieldProps,f=(0,I.Z)(_,S);return F.createElement(l.Z,(0,R.Z)({mode:"edit",valueType:y,fieldProps:E,filedConfig:{valueType:y},proFieldProps:m},f))},L=function(_){var E=_.fieldProps,m=_.proFieldProps,f=(0,I.Z)(_,c);return F.createElement(l.Z,(0,R.Z)({mode:"edit",valueType:"password",fieldProps:E,proFieldProps:m,filedConfig:{valueType:y}},f))},s=k;s.Password=L,s.displayName="ProFormComponent",T.Z=s},99652:function(N,T,t){t.r(T);var R=t(31734),I=t.n(R),F=t(45176),l=t.n(F),S=t(32914),c=t.n(S),y=t(94601),k=t(9436),L=t(47232),s=t(5966),K=t(89232),_=t(61768),E=t(90054),m=t(41818),f=t(59841),w=t(25084),M=t(4914),$=t(71577),z=t(48086),u=t(67294),e=t(85893),G=function(g){var v=g.bridgeId,C=(0,u.useRef)(),x=(0,u.useRef)(),B=(0,u.useState)(!1),p=l()(B,2),D=p[0],b=p[1],O=(0,u.useState)(),i=l()(O,2),r=i[0],A=i[1],W=function(){var a=I()(c().mark(function P(o){return c().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.abrupt("return",(0,f.request)("http://localhost:8080/bridgeCheck/getDailyRecordByBridgeId.api",{method:"POST",data:{bridgeId:v,current:o.current,pageSize:o.pageSize}}));case 1:case"end":return Z.stop()}},P)}));return function(o){return a.apply(this,arguments)}}(),d=function(){var a=I()(c().mark(function P(){return c().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,f.request)("http://localhost:8080/bridgeCheck/getDailySpec.api",{method:"POST",data:{currentRecordId:r?.dailyCheckId}}));case 1:case"end":return j.stop()}},P)}));return function(){return a.apply(this,arguments)}}(),n=[{title:"\u5DE1\u68C0\u7F16\u53F7",key:"dailyCheckId",dataIndex:"dailyCheckId"},{title:"\u5DE1\u68C0\u65F6\u95F4",key:"checkDate",dataIndex:"checkDate",valueType:"dateTime"},{title:"\u5DE1\u68C0\u4EBA",key:"inspectorName",dataIndex:"inspectorName"},{title:"\u64CD\u4F5C",key:"option",valueType:"option",render:function(P,o){return[(0,e.jsx)("a",{onClick:function(){A(o),b(!0)},children:"\u67E5\u770B\u8BE6\u60C5"},"a")]}}],h=[{title:"\u68C0\u67E5\u9879",key:"checkItem",dataIndex:"checkItem"},{title:"\u662F\u5426\u5B8C\u597D",key:"complete",dataIndex:"complete"},{title:"\u635F\u574F\u7C7B\u578B",key:"harmType",dataIndex:"harmType"},{title:"\u635F\u574F\u7A0B\u5EA6",key:"harmDegree",dataIndex:"harmDegree"},{title:"\u635F\u574F\u4F4D\u7F6E",key:"harmPos",dataIndex:"harmPos"},{title:"\u5907\u6CE8",key:"tips",dataIndex:"tips"}];return(0,u.useEffect)(function(){var a;(a=C.current)===null||a===void 0||a.reload()},[v]),(0,u.useEffect)(function(){var a;(a=x.current)===null||a===void 0||a.reload()},[r]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(E.Z,{actionRef:C,columns:n,request:W,pagination:{pageSize:20,showSizeChanger:!1},rowKey:"key",toolBarRender:!1,search:!1}),(0,e.jsxs)(w.Z,{width:700,visible:D,onClose:function(){A(void 0),b(!1)},closable:!1,children:[(0,e.jsxs)(M.Z,{title:r?.bridgeName,bordered:!0,size:"small",children:[(0,e.jsx)(M.Z.Item,{label:"\u4FDD\u62A4\u533A\u57DF\u5185\u65BD\u5DE5",span:3,children:r?.inProtectConstruct}),(0,e.jsx)(M.Z.Item,{label:"\u5176\u4ED6\u5371\u53CA\u4EBA\u3001\u884C\u8239\u3001\u884C\u8F66\u5B89\u5168\u7684\u75C5\u5BB3",span:3,children:r?.otherHarm}),(0,e.jsx)(M.Z.Item,{label:"\u5DE1\u67E5\u65E5\u671F",span:3,children:r?.checkDate}),(0,e.jsx)(M.Z.Item,{label:"\u5DE1\u67E5\u4EBA",children:r?.inspectorName})]}),(0,e.jsx)(E.Z,{actionRef:x,columns:h,request:d,pagination:!1,rowKey:"key",toolBarRender:!1,search:!1})]})]})},V=function(g){var v=g.onChange,C=g.bridgeId,x=(0,u.useState)(!1),B=l()(x,2),p=B[0],D=B[1],b=(0,u.useState)(),O=l()(b,2),i=O[0],r=O[1],A=(0,u.useRef)();(0,u.useEffect)(function(){var d;(d=A.current)===null||d===void 0||d.resetFields()},[p]);var W=[{title:"\u6865\u6881\u7F16\u53F7",key:"bridgeId",dataIndex:"bridgeId"},{title:"\u6865\u6881\u540D\u79F0",key:"bridgeName",dataIndex:"bridgeName"},{title:"\u6865\u6881\u7C7B\u578B",key:"bridgeType",dataIndex:"bridgeType"},{title:"\u8D1F\u8D23\u4EBA",key:"chargeName",dataIndex:"chargeName"},{title:"BCI\u7B49\u7EA7",key:"bciLevel",dataIndex:"bciLevel",valueEnum:{1:{text:"\u4F18\u79C0",color:"#1890ff"},2:{text:"\u826F\u597D",color:"#52c41a"},3:{text:"\u4E00\u822C",color:"#fadb14"},4:{text:"\u5F02\u5E38",color:"#874d00"},5:{text:"\u5371\u9669",color:"#ff4d4f"}}},{title:"BSI\u7B49\u7EA7",key:"bsiLevel",dataIndex:"bsiLevel",valueEnum:{1:{text:"\u4F18\u79C0",color:"#1890ff"},2:{text:"\u826F\u597D",color:"#52c41a"},3:{text:"\u4E00\u822C",color:"#fadb14"},4:{text:"\u5F02\u5E38",color:"#874d00"},5:{text:"\u5371\u9669",color:"#ff4d4f"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(n,h){return[(0,e.jsx)($.Z,{type:"primary",onClick:function(){r(h),D(!0)},children:"\u68C0\u67E5"})]}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(E.Z,{columns:W,request:y.ce,rowKey:"bridgeId",options:!1,onRow:function(n){return{onClick:function(){n.bridgeId&&v(n.bridgeId,n.bridgeName)}}}}),(0,e.jsxs)(k.Y,{title:"\u65E5\u5E38\u68C0\u67E5",width:900,visible:p,formRef:A,initialValues:{bridgeName:i?.bridgeName},modalProps:{onCancel:function(){D(!1)}},onFinish:function(){var d=I()(c().mark(function n(h){var a;return c().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return h.bridgeId=i?.bridgeId,console.log(h),D(!1),o.next=5,(0,f.request)("http://localhost:8080/bridgeCheck/addDailyCheck.api",{method:"POST",data:h});case 5:if(a=o.sent,a!=="success"){o.next=9;break}return z.ZP.success("\u6DFB\u52A0\u5DE1\u68C0\u8BB0\u5F55\u6210\u529F\uFF01"),o.abrupt("return",!0);case 9:case"end":return o.stop()}},n)}));return function(n){return d.apply(this,arguments)}}(),children:[(0,e.jsxs)(L.A.Group,{children:[(0,e.jsx)(s.Z,{width:"xl",name:"bridgeName",label:"\u6865\u6881\u540D\u79F0",disabled:!0}),(0,e.jsx)(s.Z,{width:"xl",name:"inProtectConstruct",label:"\u533A\u57DF\u4FDD\u62A4\u5185\u65BD\u5DE5"}),(0,e.jsx)(s.Z,{width:"xl",name:"otherHarm",label:"\u5176\u4ED6\u5371\u673A\u884C\u4EBA\u3001\u884C\u8239\u3001\u884C\u8F66\u5B89\u5168\u7684\u75C5\u5BB3"}),(0,e.jsx)(s.Z,{width:"xl",name:"maintainAdvice",label:"\u517B\u62A4\u5EFA\u8BAE"})]}),(0,e.jsx)(K.u,{name:"checkItems",children:(0,e.jsx)(_.Z,{name:"checkItemsField",label:"\u68C0\u67E5\u9879\u8BB0\u5F55",transform:function(n){return{checkItem:n[0],complete:n[1],harmType:n[2],harmDegree:n[3],harmPos:n[4],tips:n[5]}},children:(0,e.jsxs)(L.A.Group,{children:[(0,e.jsx)(s.Z,{rules:[{required:!0,message:"\u5FC5\u586B\u9879"}],width:"xs",name:"checkItem",label:"\u68C0\u67E5\u9879"}),(0,e.jsx)(s.Z,{rules:[{required:!0,message:"\u5FC5\u586B\u9879"}],width:"xs",name:"complete",label:"\u662F\u5426\u5B8C\u597D"}),(0,e.jsx)(s.Z,{width:"xs",name:"harmType",label:"\u635F\u5BB3\u7C7B\u578B"}),(0,e.jsx)(s.Z,{width:"xs",name:"harmDegree",label:"\u635F\u5BB3\u7A0B\u5EA6"}),(0,e.jsx)(s.Z,{width:"xs",name:"harmPos",label:"\u635F\u5BB3\u4F4D\u7F6E"}),(0,e.jsx)(s.Z,{width:"xs",name:"tips",label:"\u5907\u6CE8"})]},"test")})})]},"check"+new Date().toDateString)]})},H=function(){var g=(0,u.useState)(1),v=l()(g,2),C=v[0],x=v[1],B=(0,u.useState)("\u8BF7\u5728\u5DE6\u8868\u9009\u62E9\u6865\u6881"),p=l()(B,2),D=p[0],b=p[1];return(0,e.jsxs)(m.Z,{split:"vertical",children:[(0,e.jsx)(m.Z,{colSpan:"800px",ghost:!0,children:(0,e.jsx)(V,{onChange:function(i,r){x(i),b(r)},bridgeId:C})}),(0,e.jsx)(m.Z,{title:"\u5DE1\u68C0\u660E\u7EC6\u8868",children:(0,e.jsx)(m.Z,{title:D,children:(0,e.jsx)(G,{bridgeId:C})})})]})};T.default=H}}]);
